using System.IO;
using System.Linq;
using CCDPlanetHelper.Models;
using Fooxboy.NucleusBot.Interfaces;
using Fooxboy.NucleusBot.Models;
using Newtonsoft.Json;

namespace CCDPlanetHelper.Commands
{
    public class HelpCommand:INucleusCommand
    {
        public string Command => "help";
        public string[] Aliases => new[] {"–ø–æ–º–æ—â—å", "–ø–æ–º–æ–≥–∏", "–∫–æ–º–∞–Ω–¥—ã", "–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏"};
        public void Execute(Message msg, IMessageSenderService sender, IBot bot)
        {
            
            //–ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–æ—Ç–æ–º –ø–µ—Ä–≤—ã–π —Ä–∞–∑.
            var usrs1 = JsonConvert.DeserializeObject<MailingModel>(File.ReadAllText("MailingUsers.json"));
            if (usrs1.Users.All(u => u.UserId != msg.MessageVK.FromId.Value))
            {
                usrs1.Users.Add(new ValuesMail()
                {
                    IsActive = true,
                    UserId = msg.MessageVK.FromId.Value
                });
                
                File.WriteAllText("MailingUsers.json", JsonConvert.SerializeObject(usrs1));
            }

            string helpText = "‚ùì–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:" +
                              "\n ‚ñ∂ –û–±—ä—è–≤–ª–µ–Ω–∏—è. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π." +
                              "\n ‚ñ∂‚ñ∂ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –Ω–∞–ø–∏—Å–∞—Ç—å \"–û–±—ä—è–≤–ª–µ–Ω–∏—è\" \n" +
                              "\n ‚ñ∂ –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ. –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π." +
                              "\n ‚ñ∂‚ñ∂ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –Ω–∞–ø–∏—Å–∞—Ç—å \"–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ\" \n" +
                              "\n ‚ñ∂ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä. –°—á–∏—Ç–∞–µ—Ç –ø—Ä–∏–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –Ω–∞–ø–∏—à–µ—Ç–µ." +
                              "\n ‚ñ∂‚ñ∂ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –Ω–∞–ø–∏—Å–∞—Ç—å \"–ü–æ—Å—á–∏—Ç–∞–π <–ø—Ä–∏–º–µ—Ä>\"" +
                              "\n ‚ñ∂‚ñ∂ –ü—Ä–∏–º–µ—Ä: –ø–æ—Å—á–∏—Ç–∞–π 10*5\n" +
                              "\n ‚ñ∂ –ö—É—Ä—Å –≤–∞–ª—é—Ç. –ü–∏—à–µ—Ç –≤–∞–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫—É—Ä—Å –≤–∞–ª—é—Ç" +
                              "\n ‚ñ∂‚ñ∂ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –Ω–∞–ø–∏—Å–∞—Ç—å \"–∫—É—Ä—Å\"\n" +
                              "\n ‚ñ∂ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è. –ë–æ—Ç –≤–∞–º –Ω–∞–ø–æ–º–Ω–∏—Ç –æ –Ω—É–∂–Ω–æ–º —Å–æ–±—ã—Ç–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –Ω–∞–ø–∏—à–µ—Ç–µ." +
                              "\n ‚ñ∂‚ñ∂ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –Ω–∞–ø–∏—Å–∞—Ç—å \"–Ω–∞–ø–æ–º–Ω–∏ <–¥–µ–Ω—å>.<–º–µ—Å—è—Ü> <—Ç–µ–∫—Å—Ç –Ω–∞–ø–æ–º–Ω–∏–Ω–∞–Ω–∏—è>\"" +
                              "\n ‚ñ∂‚ñ∂ –ü—Ä–∏–º–µ—Ä: –Ω–∞–ø–æ–º–Ω–∏ 25.1 –ø–æ–∑–¥—Ä–∞–≤–∏—Ç—å –º–æ–µ–≥–æ –±—Ä–∞—Ç–∞ —Å –î–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è.\n" +
                              "\n ‚ñ∂ –†–µ–ø–æ—Ä—Ç. –°–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ª—É—á–∏—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏ —Å–º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –Ω–µ–≥–æ." +
                              "\n ‚ñ∂‚ñ∂ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –Ω–∞–ø–∏—Å–∞—Ç—å \"—Ä–µ–ø–æ—Ä—Ç <—Å–æ–æ–±—â–µ–Ω–∏–µ>\"" +
                              "\n ‚ñ∂‚ñ∂ –ü—Ä–∏–º–µ—Ä: —Ä–µ–ø–æ—Ä—Ç —è –Ω–µ –º–æ–≥—É –Ω–∞–π—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥\n" +
                              "\n ‚ñ∂ –ü–æ–¥–ø–∏—Å–∫–∞. –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏." +
                              "\n ‚ñ∂‚ñ∂ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –Ω–∞–ø–∏—Å–∞—Ç—å \"–ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è\"\n" +
                              "\n ‚ñ∂ –ë–∏–Ω–¥—ã. –í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –±–∏–Ω–¥–æ–≤" +
                              "\n ‚ñ∂‚ñ∂ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ë–∏–Ω–¥—ã \n" +
                              "\n ‚ñ∂ Changelog. –í—ã–≤–æ–¥–∏—Ç changelog" +
                              "\n ‚ñ∂‚ñ∂ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: changelog" +
                              "\n ‚ñ∂ –û—Ç–ø–∏—Å–∫–∞. –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —Ä–∞—Å—Å—ã–ª–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏." +
                              "\n ‚ñ∂‚ñ∂ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –Ω–∞–ø–∏—Å–∞—Ç—å \"–æ–ø–ø–∏—Å–∞—Ç—å—Å—è\"\n" +
                              "\n ‚ñ∂ –û–±—ä—è–≤–ª–µ–Ω–∏—è <–°–µ—Ä–≤–µ—Ä> <—Å—Ç—Ä–∞–Ω–∏—Ü–∞> - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞ <—Å–µ—Ä–≤–µ—Ä> –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ <—Å—Ç—Ä–∞–Ω–∏—Ü–∞>" +
                              "\n ‚ñ∂‚ñ∂ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –û–±—ä—è–≤–ª–µ–Ω–∏—è 1 2\n" +
                              "\n ‚ñ∂ –û–±—ä—è–≤–ª–µ–Ω–∏–µ id-<ID –æ–±—ä—è–≤–ª–µ–Ω–∏—è> - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ –µ–≥–æ ID\n" +
                              "\n ‚ñ∂ CarInfo <ID –∞–≤—Ç–æ–º–æ–±–∏–ª—è> - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–≤—Ç–æ –ø–æ –µ–≥–æ ID\n" +
                              "\n ‚ñ∂ –ú–µ–Ω—é. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤ –±–µ—Å–µ–¥–∞—Ö)\n" +
                              "\n ‚ñ∂ –ü–æ–∏—Å–∫ <–Ω–∞–∑–≤–∞–Ω–∏–µ –∞–≤—Ç–æ> - –ø–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é.\n" +
                              "\n ‚ñ∂ –ù–∞–ø–æ–º–Ω–∏–Ω–∞–Ω–∏—è  - –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π" +
                              "\n ‚ñ∂ –£–¥–∞–ª–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ <ID> - —É–¥–∞–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ";
            
            
            var file = File.ReadAllText("AdminsConfig.json");
            var admins = JsonConvert.DeserializeObject<Models.AdminsModels>(file);

            var isAdmin = admins.Users.Any(u => u == msg.MessageVK.FromId);

            if (!isAdmin) sender.Text(helpText, msg.ChatId);
            else
            {
                var adminText = "\nü§¥ –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã: " +
                                "\n ‚ñ∂ –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞: adminadd <id –∏–ª–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ>" +
                                "\n ‚ñ∂ –£–¥–∞–ª–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞: adminremove <id –∏–ª–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ>" +
                                "\n ‚ñ∂ –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å: addcar <–º–æ–¥–µ–ª—å>" +
                                "\n ‚ñ∂ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç: courceset <–¥–æ–ª–ª–∞—Ä> <–µ–≤—Ä–æ>" +
                                "\n ‚ñ∂ –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤: adminlist" +
                                "\n ‚ñ∂ –†–∞—Å—Å—ã–ª–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π: —Ä–∞—Å—Å—ã–ª–∫–∞ <—Å–æ–æ–±—â–µ–Ω–∏–µ>" +
                                "\n ‚ñ∂ –£–¥–∞–ª–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ: removead <ID –æ–±—ä—è–≤–ª–µ–Ω–∏—è>" +
                                "\n ‚ñ∂ –£–¥–∞–ª–∏—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å: removecar <ID –∞–≤—Ç–æ–º–æ–±–∏–ª—è>" +
                                "\n ‚ñ∂ –°–ø–∏—Å–æ–∫ –Ω–µ–æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö —Ä–µ–ø–æ—Ä—Ç–æ–≤: —Ä–µ–ø–æ—Ä—Ç—ã" +
                                "\n ‚ñ∂ –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Ä–µ–ø–æ—Ä—Ç: reportrp <ID —Ä–µ–ø–æ—Ä—Ç–∞> <—Å–æ–æ–±—â–µ–Ω–∏–µ>" +
                                "\n ‚ñ∂ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–Ω–¥—ã: bindsedit <—Ç–µ–∫—Å—Ç>" +
                                "\n ‚ñ∂ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å changelog: changelogedit <—Ç–µ–∫—Å—Ç>" +
                                "\n ‚ñ∂ –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏: carlist" +
                                "\n ‚ñ∂ –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–≥ –ø–æ–∏—Å–∫–∞: addtag <ID –∞–≤—Ç–æ–º–æ–±–∏–ª—è>-<—Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –±–µ–∑ –ø—Ä–æ–±–ª–µ–ª–æ–≤>" +
                                "\n ‚ñ∂ –°–æ–∑–¥–∞—Ç—å —Ç—é–Ω–∏–Ω–≥: addtuning <–¶–µ–Ω–∞> <–ù–∞–∑–≤–∞–Ω–∏–µ>" +
                                "\n ‚ñ∂ –ê–¥–º–∏–Ω –º–µ–Ω—é: adminmenu " +
                                "\n ‚ñ∂ –£–¥–∞–ª–∏—Ç—å —Ç–µ–≥ –ø–æ–∏—Å–∫–∞: removetag <—Ç–µ–∫—Å—Ç —Ç–µ–≥–∞>" +
                                "\n ‚ñ∂ –£–¥–∞–ª–∏—Ç—å —Ç—é–Ω–∏–Ω–≥ –ø–∞–∫: removetuning <ID —Ç—é–Ω–∏–Ω–≥ –ø–∞–∫–∞>" +
                                "\n ‚ñ∂ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç—é–Ω–∏–Ω–≥ –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å: tuningset <ID –∞–≤—Ç–æ–º–æ–±–∏–ª—è> <ID —Ç—é–Ω–∏–Ω–≥ –ø–∞–∫–∞>";

                var text = helpText + adminText;
                sender.Text(text, msg.ChatId);
            }
        }

        public void Init(IBot bot, ILoggerService logger)
        {
        }
    }
}